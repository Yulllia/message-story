{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/slipw/OneDrive/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0438/Project-Yulia/messanger-react/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/slipw/OneDrive/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0438/Project-Yulia/messanger-react/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/slipw/OneDrive/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0438/Project-Yulia/messanger-react/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/slipw/OneDrive/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0438/Project-Yulia/messanger-react/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/slipw/OneDrive/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0438/Project-Yulia/messanger-react/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useState}from\"react\";import{Link}from\"react-router-dom\";import{ReactComponent as ArrowRightIcon}from\"../../assets/svg/keyboardArrowRightIcon.svg\";import visibilityIcon from\"../../assets/svg/visibilityIcon.svg\";import{useNavigate}from\"react-router-dom\";import\"react-toastify/dist/ReactToastify.css\";import{AuthContext}from\"../../context/AuthContext\";import{useHttp}from\"../../hooks/UseHttpHook\";import FacebookLogin from\"react-facebook-login\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SignIn(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showPassword=_useState2[0],setShowPassword=_useState2[1];var _useState3=useState({name:\"\",password:\"\"}),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var name=formData.name,password=formData.password;var navigate=useNavigate();var auth=useContext(AuthContext);var _useHttp=useHttp(),request=_useHttp.request;var onChange=function onChange(e){setFormData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},e.target.id,e.target.value));});};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return request(\"/api/auth/login\",\"POST\",JSON.stringify(formData));case 3:data=_context.sent;auth.login(data===null||data===void 0?void 0:data.token,data===null||data===void 0?void 0:data.name);if(data!==null&&data!==void 0&&data.token){navigate(\"/\");}case 6:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();var responseFacebook=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(response){var data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return request(\"/api/auth/login/facebook\",\"POST\",JSON.stringify({accessToken:response.accessToken,userId:response.userID,image:response.picture.data.url}));case 2:data=_context2.sent;auth.login(data===null||data===void 0?void 0:data.token,data===null||data===void 0?void 0:data.name,data===null||data===void 0?void 0:data.image);if(data!==null&&data!==void 0&&data.idFacebook){navigate(\"/\");}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function responseFacebook(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"pageContainer\",children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"pageHeader\",children:\"Sign In Page\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"input\",{className:\"emailInput\",type:\"text\",placeholder:\"Name\",id:\"name\",value:name,onChange:onChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"passwordInputDiv\",children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?\"text\":\"password\",placeholder:\"Password\",className:\"passwordInput\",id:\"password\",value:password,onChange:onChange}),/*#__PURE__*/_jsx(\"img\",{className:\"showPassword\",src:visibilityIcon,alt:\"show Password\",onClick:function onClick(){return setShowPassword(function(prevState){return!prevState;});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"signInBar\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"signInText\",children:\"Sign In\"}),/*#__PURE__*/_jsx(\"button\",{className:\"signInButton\",children:/*#__PURE__*/_jsx(ArrowRightIcon,{fill:\"#ffffff\",width:\"34px\",height:\"34px\"})})]})]}),/*#__PURE__*/_jsx(FacebookLogin,{className:\"facebookLogin\",appId:\"1207028653424445\",autoLoad:true,fields:\"name,email,picture\",callback:responseFacebook}),/*#__PURE__*/_jsx(Link,{to:\"/sign-up\",className:\"registerLink\",children:\"Sign Up\"})]});}export default SignIn;","map":{"version":3,"names":["useContext","useState","Link","ReactComponent","ArrowRightIcon","visibilityIcon","useNavigate","AuthContext","useHttp","FacebookLogin","SignIn","showPassword","setShowPassword","name","password","formData","setFormData","navigate","auth","request","onChange","e","prevState","target","id","value","onSubmit","preventDefault","JSON","stringify","data","login","token","responseFacebook","response","accessToken","userId","userID","image","picture","url","idFacebook"],"sources":["C:/Users/slipw/OneDrive/Документи/Project-Yulia/messanger-react/client/src/pages/sign-in/SignIn.jsx"],"sourcesContent":["import { useContext, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { ReactComponent as ArrowRightIcon } from \"../../assets/svg/keyboardArrowRightIcon.svg\";\r\nimport visibilityIcon from \"../../assets/svg/visibilityIcon.svg\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport { useHttp } from \"../../hooks/UseHttpHook\";\r\nimport FacebookLogin from \"react-facebook-login\";\r\n\r\n\r\nfunction SignIn() {\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const { name, password } = formData;\r\n  const navigate = useNavigate();\r\n  const auth = useContext(AuthContext);\r\n  const { request } = useHttp();\r\n\r\n  const onChange = (e) => {\r\n    setFormData((prevState) => ({\r\n      ...prevState,\r\n      [e.target.id]: e.target.value,\r\n    }));\r\n  };\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const data = await request(\r\n      \"/api/auth/login\",\r\n      \"POST\",\r\n      JSON.stringify(formData)\r\n    );\r\n    auth.login(data?.token, data?.name);\r\n    if (data?.token) {\r\n      navigate(\"/\");\r\n    }\r\n  };\r\n\r\n  const responseFacebook = async (response) =>{\r\n    const data = await request(\r\n      \"/api/auth/login/facebook\",\r\n      \"POST\",\r\n       JSON.stringify({accessToken:response.accessToken, userId:response.userID, image:response.picture.data.url})\r\n    );\r\n    auth.login(data?.token, data?.name, data?.image);\r\n    if (data?.idFacebook) {\r\n      navigate(\"/\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"pageContainer\">\r\n      <header>\r\n        <p className=\"pageHeader\">Sign In Page</p>\r\n      </header>\r\n      <form onSubmit={onSubmit}>\r\n        <input\r\n          className=\"emailInput\"\r\n          type=\"text\"\r\n          placeholder=\"Name\"\r\n          id=\"name\"\r\n          value={name}\r\n          onChange={onChange}\r\n        />\r\n        <div className=\"passwordInputDiv\">\r\n          <input\r\n            type={showPassword ? \"text\" : \"password\"}\r\n            placeholder=\"Password\"\r\n            className=\"passwordInput\"\r\n            id=\"password\"\r\n            value={password}\r\n            onChange={onChange}\r\n          />\r\n          <img\r\n            className=\"showPassword\"\r\n            src={visibilityIcon}\r\n            alt=\"show Password\"\r\n            onClick={() => setShowPassword((prevState) => !prevState)}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"signInBar\">\r\n          <p className=\"signInText\">Sign In</p>\r\n          <button className=\"signInButton\">\r\n            <ArrowRightIcon fill=\"#ffffff\" width=\"34px\" height=\"34px\" />\r\n          </button>\r\n        </div>\r\n      </form>\r\n      <FacebookLogin\r\n        className=\"facebookLogin\"\r\n        appId=\"1207028653424445\"\r\n        autoLoad={true}\r\n        fields=\"name,email,picture\"\r\n        callback={responseFacebook}\r\n      />\r\n      <Link to=\"/sign-up\" className=\"registerLink\">\r\n        Sign Up\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignIn;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}