{"ast":null,"code":"import _slicedToArray from\"C:/Users/slipw/OneDrive/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0438/Project-Yulia/messanger-react/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useCallback,useEffect}from\"react\";var storageName='userData';export var useAuth=function useAuth(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),userName=_useState4[0],setUserName=_useState4[1];var login=useCallback(function(jwtToken,name,image){setToken(jwtToken);setUserName(name);if(name){localStorage.setItem(storageName,JSON.stringify({token:jwtToken,name:name,image:image}));}},[]);var logout=useCallback(function(){setToken(null);setUserName(null);localStorage.removeItem(storageName);},[]);useEffect(function(){var data=JSON.parse(localStorage.getItem(storageName));if(data&&data.token){login(data.token,data.userId);}},[login]);return{login:login,logout:logout,token:token,userName:userName};};","map":{"version":3,"names":["useState","useCallback","useEffect","storageName","useAuth","token","setToken","userName","setUserName","login","jwtToken","name","image","localStorage","setItem","JSON","stringify","logout","removeItem","data","parse","getItem","userId"],"sources":["C:/Users/slipw/OneDrive/Документи/Project-Yulia/messanger-react/client/src/hooks/AuthHook.js"],"sourcesContent":["import { useState,useCallback, useEffect} from \"react\";\r\n\r\n\r\nconst storageName  = 'userData'\r\n\r\nexport const useAuth = () =>{\r\n    const [token, setToken] = useState(null);\r\n    const [userName, setUserName] = useState(null);\r\n\r\n    const login = useCallback((jwtToken, name, image)=>{\r\n        setToken(jwtToken)\r\n        setUserName(name)\r\n        if (name) {\r\n            localStorage.setItem(storageName, JSON.stringify({token:jwtToken, name:name, image:image}))\r\n        }\r\n    },[])\r\n\r\n    const logout = useCallback(()=>{\r\n        setToken(null)\r\n        setUserName(null)\r\n        localStorage.removeItem(storageName)\r\n    },[])\r\n\r\n\r\n    useEffect(()=>{\r\n        const data = JSON.parse(localStorage.getItem(storageName))\r\n        if(data && data.token){\r\n            login(data.token, data.userId)\r\n        }\r\n    },[login])\r\n\r\n    return {login, logout, token, userName}\r\n}"],"mappings":"yMAAA,OAASA,QAAT,CAAkBC,WAAlB,CAA+BC,SAA/B,KAA+C,OAA/C,CAGA,GAAMC,YAAW,CAAI,UAArB,CAEA,MAAO,IAAMC,QAAO,CAAG,QAAVA,QAAU,EAAK,CACxB,cAA0BJ,QAAQ,CAAC,IAAD,CAAlC,wCAAOK,KAAP,eAAcC,QAAd,eACA,eAAgCN,QAAQ,CAAC,IAAD,CAAxC,yCAAOO,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,MAAK,CAAGR,WAAW,CAAC,SAACS,QAAD,CAAWC,IAAX,CAAiBC,KAAjB,CAAyB,CAC/CN,QAAQ,CAACI,QAAD,CAAR,CACAF,WAAW,CAACG,IAAD,CAAX,CACA,GAAIA,IAAJ,CAAU,CACNE,YAAY,CAACC,OAAb,CAAqBX,WAArB,CAAkCY,IAAI,CAACC,SAAL,CAAe,CAACX,KAAK,CAACK,QAAP,CAAiBC,IAAI,CAACA,IAAtB,CAA4BC,KAAK,CAACA,KAAlC,CAAf,CAAlC,EACH,CACJ,CANwB,CAMvB,EANuB,CAAzB,CAQA,GAAMK,OAAM,CAAGhB,WAAW,CAAC,UAAI,CAC3BK,QAAQ,CAAC,IAAD,CAAR,CACAE,WAAW,CAAC,IAAD,CAAX,CACAK,YAAY,CAACK,UAAb,CAAwBf,WAAxB,EACH,CAJyB,CAIxB,EAJwB,CAA1B,CAOAD,SAAS,CAAC,UAAI,CACV,GAAMiB,KAAI,CAAGJ,IAAI,CAACK,KAAL,CAAWP,YAAY,CAACQ,OAAb,CAAqBlB,WAArB,CAAX,CAAb,CACA,GAAGgB,IAAI,EAAIA,IAAI,CAACd,KAAhB,CAAsB,CAClBI,KAAK,CAACU,IAAI,CAACd,KAAN,CAAac,IAAI,CAACG,MAAlB,CAAL,CACH,CACJ,CALQ,CAKP,CAACb,KAAD,CALO,CAAT,CAOA,MAAO,CAACA,KAAK,CAALA,KAAD,CAAQQ,MAAM,CAANA,MAAR,CAAgBZ,KAAK,CAALA,KAAhB,CAAuBE,QAAQ,CAARA,QAAvB,CAAP,CACH,CA3BM"},"metadata":{},"sourceType":"module"}