{"ast":null,"code":"import React from\"react\";import{useContext}from\"react\";import{useEffect,useRef}from\"react\";import Spinner from\"../../components/Spinner\";import{localContext}from\"../../context/MessageContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Chats(_ref){var setShowMessage=_ref.setShowMessage;var _useContext=useContext(localContext),getItem=_useContext.getItem,messages=_useContext.messages,getData=_useContext.getData,getContact=_useContext.getContact,lastUserMessages=_useContext.lastUserMessages,messageData=_useContext.messageData;var scrollRef=useRef();useEffect(function(){getData();},[]);useEffect(function(){var _scrollRef$current;getContact();(_scrollRef$current=scrollRef.current)===null||_scrollRef$current===void 0?void 0:_scrollRef$current.scrollIntoView({behavior:\"smooth\"});},[messages]);return/*#__PURE__*/_jsxs(\"div\",{className:\"chatBlock\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Chats\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"listStyle\",children:lastUserMessages?lastUserMessages.map(function(item){var timeElapsed=item.date;var today=new Date(timeElapsed);var current=today.toLocaleDateString(\"en-us\",{month:\"short\"})+\" \"+today.getDate()+\",\"+today.getFullYear();return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return setShowMessage(true);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"conversation \".concat(messageData.name===item.name&&\"activeBlock\"),ref:scrollRef,onClick:function onClick(){return getItem(item._id,item.image,item.name);},children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(item.image),alt:\"userpicture\",width:\"40px\",height:\"40px\"}),/*#__PURE__*/_jsx(\"div\",{className:\"colored-circle\",children:/*#__PURE__*/_jsx(\"div\",{className:\"checkmark\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"title-text\",children:item.name}),/*#__PURE__*/_jsx(\"div\",{className:\"created-date\",children:current}),/*#__PURE__*/_jsx(\"div\",{className:\"conversation-message\",children:item.message})]})})},item._id);}):/*#__PURE__*/_jsx(Spinner,{})})]});}export default Chats;","map":{"version":3,"names":["React","useContext","useEffect","useRef","Spinner","localContext","Chats","setShowMessage","getItem","messages","getData","getContact","lastUserMessages","messageData","scrollRef","current","scrollIntoView","behavior","map","item","timeElapsed","date","today","Date","toLocaleDateString","month","getDate","getFullYear","name","_id","image","message"],"sources":["C:/Users/slipw/OneDrive/Документи/Project-Yulia/messanger-react/client/src/pages/chats/Chats.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useContext } from \"react\";\r\nimport { useEffect, useRef} from \"react\";\r\nimport Spinner from \"../../components/Spinner\";\r\nimport { localContext } from \"../../context/MessageContext\";\r\n\r\nfunction Chats({setShowMessage}) {\r\n  const { getItem, messages, getData, getContact, lastUserMessages, messageData} =\r\n    useContext(localContext);\r\n    const scrollRef = useRef();\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    getContact();\r\n    scrollRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages]);\r\n\r\n  return (\r\n    <div className=\"chatBlock\">\r\n      <h1 className=\"title\">Chats</h1>\r\n      <ul className=\"listStyle\">\r\n        {lastUserMessages ? (\r\n          lastUserMessages.map((item) => {\r\n            const timeElapsed = item.date;\r\n            const today = new Date(timeElapsed);\r\n            const current =\r\n              today.toLocaleDateString(\"en-us\", { month: \"short\" }) +\r\n              \" \" +\r\n              today.getDate() +\r\n              \",\" +\r\n              today.getFullYear();\r\n            return (\r\n              <React.Fragment key={item._id}>\r\n                <li onClick={()=>setShowMessage(true)}>\r\n                  <div\r\n                    className={`conversation ${\r\n                      messageData.name === item.name && \"activeBlock\"\r\n                    }`}\r\n                    ref={scrollRef}\r\n                    onClick={() => getItem(item._id, item.image, item.name)}\r\n                  >\r\n                      <img\r\n                        src={`${item.image}`}\r\n                        alt=\"userpicture\"\r\n                        width=\"40px\"\r\n                        height=\"40px\"\r\n                      />\r\n                      <div className=\"colored-circle\">\r\n                        <div className=\"checkmark\"></div>\r\n                      </div>\r\n                    <div className=\"title-text\">{item.name}</div>\r\n                    <div className=\"created-date\">{current}</div>\r\n                    <div className=\"conversation-message\">{item.message}</div>\r\n                  </div>\r\n                </li>\r\n              </React.Fragment>\r\n            );\r\n          })\r\n        ) : (\r\n          <Spinner />\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chats;\r\n"],"mappings":"AAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,OAA3B,CACA,OAASC,SAAT,CAAoBC,MAApB,KAAiC,OAAjC,CACA,MAAOC,QAAP,KAAoB,0BAApB,CACA,OAASC,YAAT,KAA6B,8BAA7B,C,wFAEA,QAASC,MAAT,MAAiC,IAAjBC,eAAiB,MAAjBA,cAAiB,CAC/B,gBACEN,UAAU,CAACI,YAAD,CADZ,CAAQG,OAAR,aAAQA,OAAR,CAAiBC,QAAjB,aAAiBA,QAAjB,CAA2BC,OAA3B,aAA2BA,OAA3B,CAAoCC,UAApC,aAAoCA,UAApC,CAAgDC,gBAAhD,aAAgDA,gBAAhD,CAAkEC,WAAlE,aAAkEA,WAAlE,CAEE,GAAMC,UAAS,CAAGX,MAAM,EAAxB,CAEFD,SAAS,CAAC,UAAM,CACdQ,OAAO,GACR,CAFQ,CAEN,EAFM,CAAT,CAIAR,SAAS,CAAC,UAAM,wBACdS,UAAU,GACV,oBAAAG,SAAS,CAACC,OAAV,gEAAmBC,cAAnB,CAAkC,CAAEC,QAAQ,CAAE,QAAZ,CAAlC,EACD,CAHQ,CAGN,CAACR,QAAD,CAHM,CAAT,CAKA,mBACE,aAAK,SAAS,CAAC,WAAf,wBACE,WAAI,SAAS,CAAC,OAAd,mBADF,cAEE,WAAI,SAAS,CAAC,WAAd,UACGG,gBAAgB,CACfA,gBAAgB,CAACM,GAAjB,CAAqB,SAACC,IAAD,CAAU,CAC7B,GAAMC,YAAW,CAAGD,IAAI,CAACE,IAAzB,CACA,GAAMC,MAAK,CAAG,GAAIC,KAAJ,CAASH,WAAT,CAAd,CACA,GAAML,QAAO,CACXO,KAAK,CAACE,kBAAN,CAAyB,OAAzB,CAAkC,CAAEC,KAAK,CAAE,OAAT,CAAlC,EACA,GADA,CAEAH,KAAK,CAACI,OAAN,EAFA,CAGA,GAHA,CAIAJ,KAAK,CAACK,WAAN,EALF,CAMA,mBACE,KAAC,KAAD,CAAO,QAAP,wBACE,WAAI,OAAO,CAAE,yBAAIpB,eAAc,CAAC,IAAD,CAAlB,EAAb,uBACE,aACE,SAAS,wBACPM,WAAW,CAACe,IAAZ,GAAqBT,IAAI,CAACS,IAA1B,EAAkC,aAD3B,CADX,CAIE,GAAG,CAAEd,SAJP,CAKE,OAAO,CAAE,yBAAMN,QAAO,CAACW,IAAI,CAACU,GAAN,CAAWV,IAAI,CAACW,KAAhB,CAAuBX,IAAI,CAACS,IAA5B,CAAb,EALX,wBAOI,YACE,GAAG,WAAKT,IAAI,CAACW,KAAV,CADL,CAEE,GAAG,CAAC,aAFN,CAGE,KAAK,CAAC,MAHR,CAIE,MAAM,CAAC,MAJT,EAPJ,cAaI,YAAK,SAAS,CAAC,gBAAf,uBACE,YAAK,SAAS,CAAC,WAAf,EADF,EAbJ,cAgBE,YAAK,SAAS,CAAC,YAAf,UAA6BX,IAAI,CAACS,IAAlC,EAhBF,cAiBE,YAAK,SAAS,CAAC,cAAf,UAA+Bb,OAA/B,EAjBF,cAkBE,YAAK,SAAS,CAAC,sBAAf,UAAuCI,IAAI,CAACY,OAA5C,EAlBF,GADF,EADF,EAAqBZ,IAAI,CAACU,GAA1B,CADF,CA0BD,CAnCD,CADe,cAsCf,KAAC,OAAD,IAvCJ,EAFF,GADF,CA+CD,CAED,cAAevB,MAAf"},"metadata":{},"sourceType":"module"}