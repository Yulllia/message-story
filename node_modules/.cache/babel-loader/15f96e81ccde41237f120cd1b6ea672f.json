{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/slipw/OneDrive/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0438/Project-Yulia/messanger-react/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/slipw/OneDrive/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0438/Project-Yulia/messanger-react/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/slipw/OneDrive/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0438/Project-Yulia/messanger-react/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/slipw/OneDrive/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0438/Project-Yulia/messanger-react/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/slipw/OneDrive/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0438/Project-Yulia/messanger-react/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext}from\"react\";import{Link}from\"react-router-dom\";import{ReactComponent as ArrowRightIcon}from\"../../assets/svg/keyboardArrowRightIcon.svg\";import visibilityIcon from\"../../assets/svg/visibilityIcon.svg\";import React from'react';import{useNavigate}from\"react-router-dom\";import{toast}from\"react-toastify\";import{AuthContext}from\"../../context/AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SignUp(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showpPassword=_useState2[0],setShowPassword=_useState2[1];var _useState3=useState({name:\"\",password:\"\"}),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var auth=useContext(AuthContext);var name=formData.name,password=formData.password;var navigate=useNavigate();var onChange=function onChange(e){setFormData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},e.target.id,e.target.value));});};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var fetchSignUp;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();try{fetchSignUp=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var rawResponse,content;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('/api/auth/register',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify(formData)});case 2:rawResponse=_context.sent;_context.next=5;return rawResponse.json();case 5:content=_context.sent;if(!rawResponse.ok){toast.error(content.message);}else{auth.login(content===null||content===void 0?void 0:content.token,content===null||content===void 0?void 0:content.name,content===null||content===void 0?void 0:content.links);navigate(\"/\");toast.success(\"User created!\");}case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchSignUp(){return _ref2.apply(this,arguments);};}();fetchSignUp();}catch(error){console.error(error,\"Something wrong with registration\");}case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"pageContainer\",children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"pageHeader\",children:\"Sign Up Page\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"input\",{className:\"nameInput\",type:\"text\",placeholder:\"Name\",id:\"name\",value:name,onChange:onChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"passwordInputDiv\",children:[/*#__PURE__*/_jsx(\"input\",{type:showpPassword?\"text\":\"password\",placeholder:\"Password\",className:\"passwordInput\",id:\"password\",value:password,onChange:onChange}),/*#__PURE__*/_jsx(\"img\",{className:\"showPassword\",src:visibilityIcon,alt:\"show Password\",onClick:function onClick(){return setShowPassword(function(prevState){return!prevState;});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"signUpBar\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"signUpText\",children:\"Sign Up\"}),/*#__PURE__*/_jsx(\"button\",{className:\"signUpButton\",children:/*#__PURE__*/_jsx(ArrowRightIcon,{fill:\"#ffffff\",width:\"34px\",height:\"34px\"})})]})]}),/*#__PURE__*/_jsx(Link,{to:\"/sign-in\",className:\"registerLink\",children:\"Sign In\"})]});}export default SignUp;","map":{"version":3,"names":["useState","useContext","Link","ReactComponent","ArrowRightIcon","visibilityIcon","React","useNavigate","toast","AuthContext","SignUp","showpPassword","setShowPassword","name","password","formData","setFormData","auth","navigate","onChange","e","prevState","target","id","value","onSubmit","preventDefault","fetchSignUp","fetch","method","headers","body","JSON","stringify","rawResponse","json","content","ok","error","message","login","token","links","success","console"],"sources":["C:/Users/slipw/OneDrive/Документи/Project-Yulia/messanger-react/client/src/pages/sign-up/SignUp.jsx"],"sourcesContent":["import { useState, useContext} from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { ReactComponent as ArrowRightIcon } from \"../../assets/svg/keyboardArrowRightIcon.svg\";\r\nimport visibilityIcon from \"../../assets/svg/visibilityIcon.svg\";\r\nimport React from 'react'\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\n\r\n\r\nfunction SignUp() {\r\n  const [showpPassword, setShowPassword] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    password: \"\",\r\n  });\r\n  const auth = useContext(AuthContext);\r\n  const { name, password } = formData;\r\n  const navigate = useNavigate();\r\n  const onChange = (e) => {\r\n    setFormData((prevState) => ({\r\n      ...prevState,\r\n      [e.target.id]: e.target.value,\r\n    }));\r\n    }\r\n\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const fetchSignUp = async() =>{\r\n        const rawResponse = await fetch('/api/auth/register', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify(formData)\r\n        });\r\n        const content = await rawResponse.json();\r\n        if(!rawResponse.ok){\r\n          toast.error(content.message)\r\n        } else{\r\n          auth.login(content?.token, content?.name, content?.links);\r\n          navigate(\"/\")\r\n          toast.success(\"User created!\")\r\n        }\r\n      }\r\n      fetchSignUp()\r\n    } catch (error) {\r\n      console.error(error, \"Something wrong with registration\");\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"pageContainer\">\r\n      <header>\r\n        <p className=\"pageHeader\">Sign Up Page</p>\r\n      </header>\r\n      <form onSubmit={onSubmit}>\r\n        <input\r\n          className=\"nameInput\"\r\n          type=\"text\"\r\n          placeholder=\"Name\"\r\n          id=\"name\"\r\n          value={name}\r\n          onChange={onChange}\r\n        />\r\n        <div className=\"passwordInputDiv\">\r\n          <input\r\n            type={showpPassword ? \"text\" : \"password\"}\r\n            placeholder=\"Password\"\r\n            className=\"passwordInput\"\r\n            id=\"password\"\r\n            value={password}\r\n            onChange={onChange}\r\n          />\r\n          <img\r\n            className=\"showPassword\"\r\n            src={visibilityIcon}\r\n            alt=\"show Password\"\r\n            onClick={() => setShowPassword((prevState) => !prevState)}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"signUpBar\">\r\n          <p className=\"signUpText\">Sign Up</p>\r\n          <button className=\"signUpButton\">\r\n            <ArrowRightIcon fill=\"#ffffff\" width=\"34px\" height=\"34px\" />\r\n          </button>\r\n        </div>\r\n      </form>\r\n\r\n      <Link to=\"/sign-in\" className=\"registerLink\">\r\n        Sign In\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignUp;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}