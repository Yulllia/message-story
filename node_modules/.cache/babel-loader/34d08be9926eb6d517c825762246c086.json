{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useCallback, useEffect } from \"react\";\nconst storageName = 'userData';\nexport const useAuth = () => {\n  _s();\n\n  const [token, setToken] = useState(null);\n  const [userName, setUserName] = useState(null);\n  const login = useCallback((jwtToken, name, image) => {\n    setToken(jwtToken);\n    setUserName(name);\n\n    if (name) {\n      localStorage.setItem(storageName, JSON.stringify({\n        token: jwtToken,\n        name: name,\n        image: image\n      }));\n    }\n  }, []);\n  const logout = useCallback(() => {\n    setToken(null);\n    setUserName(null);\n    localStorage.removeItem(storageName);\n  }, []);\n  useEffect(() => {\n    const data = JSON.parse(localStorage.getItem(storageName));\n\n    if (data && data.token) {\n      login(data.token, data.userId);\n    }\n  }, [login]);\n  return {\n    login,\n    logout,\n    token,\n    userName\n  };\n};\n\n_s(useAuth, \"shJxRG+qcs/3OLw3+rlNMPfOx1Y=\");","map":{"version":3,"names":["useState","useCallback","useEffect","storageName","useAuth","token","setToken","userName","setUserName","login","jwtToken","name","image","localStorage","setItem","JSON","stringify","logout","removeItem","data","parse","getItem","userId"],"sources":["C:/Users/slipw/OneDrive/Документи/Project-Yulia/messanger-react/client/src/hooks/AuthHook.js"],"sourcesContent":["import { useState,useCallback, useEffect} from \"react\";\r\n\r\n\r\nconst storageName  = 'userData'\r\n\r\nexport const useAuth = () =>{\r\n    const [token, setToken] = useState(null);\r\n    const [userName, setUserName] = useState(null);\r\n\r\n    const login = useCallback((jwtToken, name, image)=>{\r\n        setToken(jwtToken)\r\n        setUserName(name)\r\n        if (name) {\r\n            localStorage.setItem(storageName, JSON.stringify({token:jwtToken, name:name, image:image}))\r\n        }\r\n    },[])\r\n\r\n    const logout = useCallback(()=>{\r\n        setToken(null)\r\n        setUserName(null)\r\n        localStorage.removeItem(storageName)\r\n    },[])\r\n\r\n\r\n    useEffect(()=>{\r\n        const data = JSON.parse(localStorage.getItem(storageName))\r\n        if(data && data.token){\r\n            login(data.token, data.userId)\r\n        }\r\n    },[login])\r\n\r\n    return {login, logout, token, userName}\r\n}"],"mappings":";;AAAA,SAASA,QAAT,EAAkBC,WAAlB,EAA+BC,SAA/B,QAA+C,OAA/C;AAGA,MAAMC,WAAW,GAAI,UAArB;AAEA,OAAO,MAAMC,OAAO,GAAG,MAAK;EAAA;;EACxB,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBN,QAAQ,CAAC,IAAD,CAAlC;EACA,MAAM,CAACO,QAAD,EAAWC,WAAX,IAA0BR,QAAQ,CAAC,IAAD,CAAxC;EAEA,MAAMS,KAAK,GAAGR,WAAW,CAAC,CAACS,QAAD,EAAWC,IAAX,EAAiBC,KAAjB,KAAyB;IAC/CN,QAAQ,CAACI,QAAD,CAAR;IACAF,WAAW,CAACG,IAAD,CAAX;;IACA,IAAIA,IAAJ,EAAU;MACNE,YAAY,CAACC,OAAb,CAAqBX,WAArB,EAAkCY,IAAI,CAACC,SAAL,CAAe;QAACX,KAAK,EAACK,QAAP;QAAiBC,IAAI,EAACA,IAAtB;QAA4BC,KAAK,EAACA;MAAlC,CAAf,CAAlC;IACH;EACJ,CANwB,EAMvB,EANuB,CAAzB;EAQA,MAAMK,MAAM,GAAGhB,WAAW,CAAC,MAAI;IAC3BK,QAAQ,CAAC,IAAD,CAAR;IACAE,WAAW,CAAC,IAAD,CAAX;IACAK,YAAY,CAACK,UAAb,CAAwBf,WAAxB;EACH,CAJyB,EAIxB,EAJwB,CAA1B;EAOAD,SAAS,CAAC,MAAI;IACV,MAAMiB,IAAI,GAAGJ,IAAI,CAACK,KAAL,CAAWP,YAAY,CAACQ,OAAb,CAAqBlB,WAArB,CAAX,CAAb;;IACA,IAAGgB,IAAI,IAAIA,IAAI,CAACd,KAAhB,EAAsB;MAClBI,KAAK,CAACU,IAAI,CAACd,KAAN,EAAac,IAAI,CAACG,MAAlB,CAAL;IACH;EACJ,CALQ,EAKP,CAACb,KAAD,CALO,CAAT;EAOA,OAAO;IAACA,KAAD;IAAQQ,MAAR;IAAgBZ,KAAhB;IAAuBE;EAAvB,CAAP;AACH,CA3BM;;GAAMH,O"},"metadata":{},"sourceType":"module"}