{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/slipw/OneDrive/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0438/Project-Yulia/messanger-react/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/slipw/OneDrive/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0438/Project-Yulia/messanger-react/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/slipw/OneDrive/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0438/Project-Yulia/messanger-react/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useCallback}from\"react\";import{toast}from\"react-toastify\";export var useHttp=function useHttp(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),data=_useState6[0],setData=_useState6[1];var request=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var method,body,headers,response,_data,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:method=_args.length>1&&_args[1]!==undefined?_args[1]:\"GET\";body=_args.length>2&&_args[2]!==undefined?_args[2]:null;headers=_args.length>3&&_args[3]!==undefined?_args[3]:{'Accept':'application/json','Content-Type':'application/json'};setLoading(true);_context.prev=4;_context.next=7;return fetch(url,{method:method,body:body,headers:headers});case 7:response=_context.sent;_context.next=10;return response.json();case 10:_data=_context.sent;if(response.ok){_context.next=13;break;}throw new Error(_data.message||\"Щось пішло нетак\");case 13:setLoading(false);return _context.abrupt(\"return\",_data);case 17:_context.prev=17;_context.t0=_context[\"catch\"](4);setLoading(false);setError(_context.t0.message);toast.error(_context.t0.message);case 22:case\"end\":return _context.stop();}}},_callee,null,[[4,17]]);}));return function(_x){return _ref.apply(this,arguments);};}(),[]);var clearError=function clearError(){return setError(null);};return{loading:loading,request:request,error:error,clearError:clearError,data:data};};","map":{"version":3,"names":["useState","useCallback","toast","useHttp","loading","setLoading","error","setError","data","setData","request","url","method","body","headers","fetch","response","json","ok","Error","message","clearError"],"sources":["C:/Users/slipw/OneDrive/Документи/Project-Yulia/messanger-react/client/src/hooks/UseHttpHook.js"],"sourcesContent":["import { useState, useCallback } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nexport const useHttp = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [data, setData] = useState(null);\r\n\r\n  const request = useCallback(\r\n    async (\r\n      url,\r\n      method = \"GET\",\r\n      body = null,\r\n      headers = {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n      },\r\n    \r\n    ) => {\r\n      setLoading(true);\r\n      try {\r\n        const response = await fetch(url, { method, body, headers });\r\n        const data = await response.json();\r\n        if (!response.ok) {\r\n          throw new Error(data.message || \"Щось пішло нетак\");\r\n        }\r\n        setLoading(false);\r\n        return data;\r\n      } catch (e) {\r\n        setLoading(false);\r\n        setError(e.message);\r\n        toast.error(e.message);\r\n      }\r\n    },\r\n    []\r\n  );\r\n  const clearError = () => setError(null);\r\n  return { loading, request, error, clearError, data};\r\n};\r\n"],"mappings":"2mBAAA,OAASA,QAAT,CAAmBC,WAAnB,KAAsC,OAAtC,CACA,OAASC,KAAT,KAAsB,gBAAtB,CAEA,MAAO,IAAMC,QAAO,CAAG,QAAVA,QAAU,EAAM,CAC3B,cAA8BH,QAAQ,CAAC,KAAD,CAAtC,wCAAOI,OAAP,eAAgBC,UAAhB,eACA,eAA0BL,QAAQ,CAAC,IAAD,CAAlC,yCAAOM,KAAP,eAAcC,QAAd,eACA,eAAwBP,QAAQ,CAAC,IAAD,CAAhC,yCAAOQ,IAAP,eAAaC,OAAb,eAEA,GAAMC,QAAO,CAAGT,WAAW,4FACzB,iBACEU,GADF,2KAEEC,MAFF,+CAEW,KAFX,CAGEC,IAHF,+CAGS,IAHT,CAIEC,OAJF,+CAIY,CACR,SAAU,kBADF,CAER,eAAgB,kBAFR,CAJZ,CAUET,UAAU,CAAC,IAAD,CAAV,CAVF,sCAY2BU,MAAK,CAACJ,GAAD,CAAM,CAAEC,MAAM,CAANA,MAAF,CAAUC,IAAI,CAAJA,IAAV,CAAgBC,OAAO,CAAPA,OAAhB,CAAN,CAZhC,QAYUE,QAZV,sCAauBA,SAAQ,CAACC,IAAT,EAbvB,SAaUT,KAbV,kBAcSQ,QAAQ,CAACE,EAdlB,+BAeY,IAAIC,MAAJ,CAAUX,KAAI,CAACY,OAAL,EAAgB,kBAA1B,CAfZ,SAiBIf,UAAU,CAAC,KAAD,CAAV,CAjBJ,gCAkBWG,KAlBX,4DAoBIH,UAAU,CAAC,KAAD,CAAV,CACAE,QAAQ,CAAC,YAAEa,OAAH,CAAR,CACAlB,KAAK,CAACI,KAAN,CAAY,YAAEc,OAAd,EAtBJ,qEADyB,+DA0BzB,EA1ByB,CAA3B,CA4BA,GAAMC,WAAU,CAAG,QAAbA,WAAa,SAAMd,SAAQ,CAAC,IAAD,CAAd,EAAnB,CACA,MAAO,CAAEH,OAAO,CAAPA,OAAF,CAAWM,OAAO,CAAPA,OAAX,CAAoBJ,KAAK,CAALA,KAApB,CAA2Be,UAAU,CAAVA,UAA3B,CAAuCb,IAAI,CAAJA,IAAvC,CAAP,CACD,CAnCM"},"metadata":{},"sourceType":"module"}